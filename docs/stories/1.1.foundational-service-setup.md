# Story 1.1: Foundational Service Setup

## Status
Approved

## Story
**As a** solo developer,
**I want** to set up a basic Python FastMCP project with a health-check endpoint,
**so that** I have a running, verifiable foundation to build upon.

## Acceptance Criteria
1. A new Git repository is initialized.
2. A Python project with FastMCP is created.
3. A `/health` endpoint exists and returns a `200 OK` status with a simple JSON response.

## Tasks / Subtasks
- [ ] Initialize Git repository (AC: 1)
  - [ ] Run `git init` in project root
  - [ ] Create initial `.gitignore` file for Python projects
  - [ ] Create initial commit with basic project structure
- [ ] Set up Python project structure (AC: 2)
  - [ ] Create `src/` directory with `app.py` as main Lambda handler
  - [ ] Create `requirements.txt` with FastMCP and core dependencies
  - [ ] Create `template.yaml` for AWS SAM infrastructure definition
  - [ ] Create `README.md` with project overview and setup instructions
  - [ ] Set up directory structure: `src/api/`, `src/services/`, `src/models/`, `src/utils/`
  - [ ] Set up `tests/` directory with `unit/` and `integration/` subdirectories
- [ ] Implement FastMCP health endpoint (AC: 3)
  - [ ] Configure FastMCP framework in `src/app.py`
  - [ ] Implement `/health` endpoint returning `200 OK` with JSON response
  - [ ] Test endpoint locally using `sam local start-api`
- [ ] Create unit tests for health endpoint
  - [ ] Write test file `tests/unit/test_health_endpoint.py`
  - [ ] Test successful health check response
  - [ ] Ensure 80% code coverage target is met

## Dev Notes

### Previous Story Insights
No previous stories exist - this is the first story in Epic 1.

### Data Models
No specific data models required for this foundational story. Future stories will implement:
- SimulationJob model with attributes: `job_id`, `user_id`, `pr_url`, `status`, `report`, `created_at`, `completed_at`
- User model with attributes: `user_id`, `github_id`, `github_username`, `encrypted_github_token`, `created_at`, `last_login_at`
[Source: architecture/data-models.md]

### API Specifications
The `/health` endpoint should return a simple JSON response with `200 OK` status. Full API specification includes future endpoints:
- `/auth/github` - GitHub OAuth initiation
- `/auth/github/callback` - OAuth callback handler
- `/simulations` - POST endpoint for job submission
- `/simulations/{jobId}` - GET endpoint for job status
[Source: architecture/rest-api-spec.md]

### Component Specifications
No UI components required for this story. This is a backend-only foundational setup.

### File Locations
Based on project structure, create files in these exact locations:
- `src/app.py` - Main API Gateway Lambda handler
- `src/api/` - Future API endpoint modules
- `src/services/` - Service layer components
- `src/models/` - Data model definitions
- `src/utils/` - Utility functions
- `tests/unit/` - Unit test files
- `tests/integration/` - Integration test files
- `template.yaml` - AWS SAM infrastructure template
- `requirements.txt` - Python dependencies
- `README.md` - Project documentation
[Source: architecture/source-tree.md]

### Testing Requirements
- Use **pytest** framework with `unittest.mock` for unit tests
- Target **80% line coverage** for all new code
- Test files should mirror `src/` directory structure in `tests/` directory
- Use test **fixtures** managed by pytest for test data
- Focus on **Unit Tests** and **Integration Tests** (no E2E for MVP)
- Use `moto` library for mocking AWS services in integration tests
[Source: architecture/test-strategy-and-standards.md]

### Technical Constraints
- **Language**: Python 3.11
- **Framework**: FastMCP (latest version)
- **Code Style**: Format with **Black**, lint with **Flake8**
- **Naming**: Follow **PEP 8** conventions
- **Infrastructure**: AWS SAM CLI 1.100+ for IaC
- **Deployment**: Target `us-west-2` region
- **Critical Rules**: Use structured logging (no `print()`), service layers for I/O, secure secrets handling, custom exceptions for API errors
[Source: architecture/tech-stack.md, architecture/coding-standards.md]

### Testing
Test files location: `tests/unit/test_health_endpoint.py`
Test standards: Use pytest with unittest.mock, aim for 80% coverage
Testing frameworks: pytest for unit tests, moto for AWS service mocking
Specific requirements: Test the `/health` endpoint returns 200 OK with JSON response

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-09-18 | 1.0 | Initial story draft created | Bob (Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be populated here after implementation*
